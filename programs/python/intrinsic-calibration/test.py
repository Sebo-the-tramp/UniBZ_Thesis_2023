import numpy as np
import cv2 as cv
import glob

img = cv.imread('../10.png')
#img = cv.imread(folder + 'calibration6.jpg')
gray = cv.cvtColor(img, cv.COLOR_BGR2GRAY)

#mtx = np.array([[  2197.942131767,   0.00000000e+00,   941],
#                [  0.00000000e+00,   2153.252131767,   459],
#                [  0.00000000e+00,   0.00000000e+00,   1.00000000e+00]])

# original
#mtx = np.array([[  1885.522131767,   0.00000000e+00,   1080],
#                [  0.00000000e+00,   1885.522131767,   720],
#                [  0.00000000e+00,   0.00000000e+00,   1.00000000e+00]])

#mtx = np.array([[1195.664901816343, 0, 961.0646879176826],
#                [0, 1191.943186340358, 538.2666320948198],
#                [0, 0, 1]])

mtx = np.array([[  2258.465831767,   0.00000000e+00,   957.8],
                [  0.00000000e+00,   2261.087931767,   539.8],
                [  0.00000000e+00,   0.00000000e+00,   1.00000000e+00]])

#dist = np.array([[0.38, 0.14, 0,  0, 0]])
#dist = np.array([[0.4034230828196694, 0.1630679871604395, -0.009043316196570342, -0.001749215084741244, -0.02827286084098643]])
#dist = np.array([[0.4034230828196694, 0.1630679871604395, -0.009043316196570342, -0.001749215084741244, 0]])
#dist = np.array([[-0.4204843937853541, -1.453607279280996, 0.002575219856559655, -0.001963281715712489, -0.1853547007129596]])
dist = np.array([[-0.3628843937853541, 3.43566361777, 0.009, -0.003, 32]])

h, w = img.shape[:2]
print("w: ", w)
print("h: ", h)
newcameramtx, roi = cv.getOptimalNewCameraMatrix(mtx, dist, (w,h), 1, (w,h))

# undistort - cv2.undistort()
dst = cv.undistort(img, mtx, dist, None, newcameramtx)
cv.imwrite('../calibresult0.png', dst)